# Cat Alchemy Workshop - 프로덕션 디자인 문서

> game_id: game_0002
> repo: mg-game-0002
> title_kr: 고양이 연금술 공방
> title_en: Cat Alchemy Workshop
> genre_tags: puzzle, crafting, idle
> doc_type: production_design
> source_of_truth: docs/design/gdd_game_0002.json
> last_updated: 2025-12-19

---

## 1. 재미 요소 (Fun Factors)

### 1.1 핵심 재미 (Core Fun)
| 요소 | 설명 | 강도 |
|------|------|------|
| **조합 발견** | 새로운 레시피를 발견하는 탐험의 재미 | ★★★★★ |
| **퍼즐 해결** | 재료 배치 퍼즐을 풀어 아이템 제작 | ★★★★☆ |
| **수집 욕구** | 다양한 레시피와 아이템 수집 | ★★★★☆ |
| **성장 만족** | 공방 시설 업그레이드로 인한 성장감 | ★★★☆☆ |

### 1.2 만족감 요소 (Satisfaction)
- **레시피 발견**: 새 레시피 해금 시 애니메이션 + 도감 등록
- **아이템 완성**: 고급 아이템 제작 시 파티클 이펙트
- **판매 수익**: 아이템 판매 시 골드 획득 연출
- **방치 보상**: 오프라인 복귀 시 자동 생산 결과 화면

### 1.3 도전 요소 (Challenge)
```
도전 구조:
├── 제한된 재료로 최적 조합 찾기
├── 시간 제한 이벤트 레시피
├── 고난이도 퍼즐 (복잡한 재료 배치)
├── 희귀 레시피 발견
└── 대량 주문 처리 (NPC 주문)
```

### 1.4 사회적 요소 (Social)
- **레시피 공유**: 친구에게 힌트 공유
- **방문 시스템**: 친구 공방 방문하여 보너스 획득
- **주간 랭킹**: 생산량/판매액 랭킹
- **협동 제작**: 특별 레시피 협동 해금

---

## 2. 게임 루프 (Game Loop)

### 2.1 코어 루프 (30초~2분)
```
┌─────────────────────────────────────────────────┐
│                    코어 루프                      │
├─────────────────────────────────────────────────┤
│  [재료 선택] → [퍼즐 배치] → [합성 실행]          │
│       ↑                            ↓             │
│       └──── [결과 확인] ← [아이템 획득] ←┘       │
└─────────────────────────────────────────────────┘
```

**단계별 상세:**
1. **재료 선택** (5초): 보유 재료 중 합성할 재료 선택
2. **퍼즐 배치** (20~60초): 재료를 올바른 패턴으로 배치
3. **합성 실행** (3초): 합성 애니메이션 재생
4. **아이템 획득** (2초): 결과 아이템 인벤토리 추가
5. **결과 확인**: 새 레시피 발견 시 도감 업데이트

### 2.2 세션 루프 (5~10분)
```
[접속] → [방치 보상 수령] → [재료 확인] → [합성 진행] → [판매] → [업그레이드]
                                              ↓
                                    [NPC 주문 처리]
```

**세션 구성:**
- 방치 보상 확인: 30초
- 합성 3~5회: 3~6분
- 판매 및 정리: 1~2분
- 업그레이드/해금: 1분

### 2.3 메타 루프 (장기)
```
┌──────────────────────────────────────────────────────┐
│                     메타 진행                         │
├──────────────────────────────────────────────────────┤
│  [레시피 해금] → [공방 확장] → [생산 효율 증가]        │
│         ↓                              ↓             │
│  [새로운 재료]                   [프레스티지 전환]     │
│         ↓                              ↓             │
│  [고급 레시피 도전] ←──────────────────┘             │
└──────────────────────────────────────────────────────┘
```

### 2.4 플로우 다이어그램
```
[앱 시작]
    ↓
[로딩 (방치 보상 계산)]
    ↓
[메인 공방 화면] ────→ [상점]
    │                  [도감]
    │                  [설정]
    ├── [합성] → [퍼즐 화면]
    │                ↓
    │           [결과 화면]
    │
    ├── [판매] → [상인 화면]
    │
    ├── [주문] → [NPC 주문 목록]
    │
    └── [업그레이드] → [공방 강화]
```

---

## 3. BM 모델 (Business Model)

### 3.1 수익화 전략
| 채널 | 비중 | 설명 |
|------|------|------|
| **리워드 광고** | 45% | 생산 가속, 보상 2배, 재료 획득 |
| **프리미엄 레시피** | 25% | 특별 레시피 팩 판매 |
| **편의 기능** | 15% | 자동 합성, 창고 확장 |
| **광고 제거** | 10% | 일회성 구매 |
| **코스메틱** | 5% | 공방 스킨, 고양이 스킨 |

### 3.2 과금 포인트
```
비과금 유저 경험:
├── 모든 기본 레시피 해금 가능
├── 일일 5회 무료 광고 부스트
├── 기본 공방 시설 사용
└── 느리지만 완전한 진행

과금 유저 혜택:
├── 광고 제거 ($2.99)
├── 프리미엄 레시피 팩 ($3.99~$9.99)
├── 자동 합성 기능 ($4.99)
├── 창고 확장 ($1.99)
└── VIP 월정액 ($7.99/월)
```

### 3.3 가격 정책
| 상품 | 가격 | 가치 |
|------|------|------|
| 소량 보석 (100) | $0.99 | 재료 팩 1개 |
| 중량 보석 (500) | $3.99 | 20% 보너스 |
| 대량 보석 (1200) | $7.99 | 40% 보너스 |
| 광고 제거 | $2.99 | 영구 적용 |
| 스타터 팩 | $4.99 | 보석 300 + 레시피 팩 + 광고 제거 |
| VIP 패스 | $7.99/월 | 일일 보석 50 + 자동 합성 + 전용 레시피 |

### 3.4 리텐션 메커니즘
- **일일 보상**: 출석 체크 (7일 사이클, 레시피 조각 포함)
- **일일 퀘스트**: 합성 N회, 판매 N개, 레시피 발견
- **주간 이벤트**: 테마 레시피 이벤트
- **시즌 패스**: 30일 시즌 보상 트랙

---

## 4. 레벨 디자인 (Level Design)

### 4.1 난이도 곡선
```
복잡도
  ▲
  │                              ╭──────
  │                         ╭────╯
  │                    ╭────╯
  │               ╭────╯
  │          ╭────╯
  │     ╭────╯
  │╭────╯
  └──────────────────────────────────────→ 레시피 티어
    1    2    3    4    5    6    7
```

**난이도 공식:**
```
퍼즐_복잡도 = 기본_칸수 + (티어 × 2)
재료_종류 = 2 + (티어 × 1)
합성_시간 = 기본_시간 × (1 + 티어 × 0.3)
```

### 4.2 콘텐츠 진행
| 티어 | 해금 조건 | 새로운 요소 |
|------|----------|-------------|
| 1 | 시작 | 기본 재료 5종, 단순 퍼즐 |
| 2 | 레시피 10개 | 중급 재료, 3×3 퍼즐 |
| 3 | 레시피 25개 | 고급 재료, 특수 합성 |
| 4 | 레시피 50개 | 희귀 재료, 4×4 퍼즐 |
| 5 | 레시피 80개 | 전설 재료, 연쇄 합성 |
| 6 | 레시피 120개 | 신화 재료, 5×5 퍼즐 |
| 7 | 프레스티지 | 영구 보너스, 특수 레시피 |

### 4.3 밸런싱 공식
```dart
// 레시피 판매가 계산
int calculateSellPrice(Recipe recipe) {
  int basePrice = recipe.tier * 100;
  double rarityMultiplier = getRarityMultiplier(recipe.rarity);
  return (basePrice * rarityMultiplier).toInt();
}

// 재료 비용 대비 수익률
double calculateProfitRatio(Recipe recipe) {
  int materialCost = recipe.materials.map((m) => m.cost).sum;
  return recipe.sellPrice / materialCost;
  // 목표: 1.5 ~ 2.5 범위 유지
}

// 방치 생산량
int idleProductionPerHour(Workshop shop) {
  return shop.autoSlots * shop.efficiency * 60 / shop.craftTime;
}
```

### 4.4 보상 체계
| 보상 유형 | 획득 조건 | 수량 |
|-----------|----------|------|
| 합성 골드 | 아이템 판매 | 티어×50~200 |
| 레시피 발견 | 새 조합 시도 | 도감 등록 |
| 일일 보석 | 출석 체크 | 10~50 |
| 퀘스트 보석 | 일일 퀘스트 완료 | 20~100 |
| 업적 보석 | 마일스톤 달성 | 50~500 |

---

## 5. UI/UX 설계

### 5.1 정보 계층
```
레벨 1 (항상 표시):
├── 현재 골드/보석
├── 합성 슬롯 상태
├── 진행 중인 자동 합성
└── 알림 배지

레벨 2 (상호작용 시):
├── 재료 인벤토리
├── 레시피 목록
├── 합성 퍼즐 화면
└── 상점 인터페이스

레벨 3 (팝업):
├── 레시피 발견 연출
├── 결과 화면
├── 설정 메뉴
└── 확인 다이얼로그
```

### 5.2 네비게이션 흐름
```
[메인 공방]
    ├── [합성] → [재료 선택] → [퍼즐] → [결과]
    ├── [도감] → [레시피 목록] → [상세 정보]
    ├── [상점] → [재료/보석/특별 상품]
    ├── [주문] → [NPC 주문 목록] → [배달]
    ├── [업그레이드] → [시설 강화]
    └── [설정] → [옵션]
```

### 5.3 피드백 시스템
| 이벤트 | 시각 | 청각 | 촉각 |
|--------|------|------|------|
| 재료 배치 | 스냅 효과 | 클릭음 | - |
| 합성 시작 | 연기 이펙트 | 합성음 | 진동 (약) |
| 합성 완료 | 빛 폭발 | 성공음 | 진동 (중) |
| 레시피 발견 | 황금 연출 | 팡파레 | 진동 (강) |
| 골드 획득 | 코인 애니메이션 | 코인음 | - |

### 5.4 접근성
- **색맹 모드**: 재료 아이콘에 패턴/모양 추가
- **폰트 크기**: 3단계 조절
- **원핸드 모드**: 퍼즐 UI 한쪽 배치
- **속도 조절**: 애니메이션 속도 조절
- **자동 기능**: 자동 합성, 자동 판매 옵션

---

## 6. 프로덕션 체크리스트

### 핵심 기능
- [ ] 퍼즐 합성 시스템
- [ ] 재료 인벤토리 관리
- [ ] 레시피 도감
- [ ] 아이템 판매 시스템
- [ ] 자동 합성 (방치)
- [ ] NPC 주문 시스템

### 콘텐츠
- [ ] 100+ 레시피
- [ ] 50+ 재료 종류
- [ ] 7 티어 진행 시스템
- [ ] 튜토리얼 (5단계)
- [ ] 스토리/NPC 대화

### 메타 시스템
- [ ] 프레스티지 시스템
- [ ] 일일/주간 퀘스트
- [ ] 도전과제
- [ ] 설정 화면
- [ ] 리더보드 연동

### 수익화
- [ ] 광고 SDK 연동
- [ ] IAP 상품 등록
- [ ] 상점 UI
- [ ] 시즌 패스 UI

### QA/최적화
- [ ] 성능 프로파일링
- [ ] 메모리 최적화
- [ ] 배터리 소모 테스트
- [ ] 다양한 해상도 테스트
- [ ] 크래시 리포팅 연동

### 출시 준비
- [ ] 스토어 에셋
- [ ] 앱 설명 (한/영)
- [ ] 개인정보 처리방침
- [ ] 이용약관
- [ ] 소프트 런칭

---

## 7. KPI 목표

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| D1 리텐션 | 45% | Firebase Analytics |
| D7 리텐션 | 18% | Firebase Analytics |
| D30 리텐션 | 7% | Firebase Analytics |
| 세션 길이 | 6분 | 평균 세션 시간 |
| 일일 세션 | 4회 | DAU / 세션 수 |
| ARPU | $0.12~0.18 | 총 매출 / DAU |
| 광고 시청률 | 55~65% | 광고 노출 / DAU |
| 결제 전환율 | 3~5% | 결제 유저 / DAU |

---

*마지막 업데이트: 2025-12-19*
