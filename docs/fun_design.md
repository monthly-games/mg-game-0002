# 고양이 연금술 공방 - 재미 디자인 문서

> game_id: game_0002
> repo: mg-game-0002

---

## 1. 게임 개요

| 항목 | 내용 |
|------|------|
| 타이틀 | 고양이 연금술 공방 |
| 장르 태그 | `puzzle`, `craft`, `idle` |
| 포트폴리오 역할 | 제작/합성 루프 실험 타이틀, 레시피/조합 시스템 공통화 기반 마련 |

---

## 2. 코어 루프 (Core Loop)

```
┌─────────────────────────────────────────────────────────┐
│  1. 재료 수집 (방치/간단 퍼즐)                           │
│         ↓                                               │
│  2. 레시피 실험/제작                                     │
│         ↓                                               │
│  3. 결과물 판매/사용                                     │
│         ↓                                               │
│  4. 공방 업그레이드 및 인테리어/고양이 배치 → (1로 반복)   │
└─────────────────────────────────────────────────────────┘
```

### 루프 상세 설명

1. **재료 수집**: 방치 시스템(`IdleManager`)을 통해 고양이들이 주기적으로 재료(허브, 물)를 수집.
2. **레시피 실험/제작**: `CraftingManager`를 통해 재료를 소비하고 결과물(포션 등) 획득.
3. **결과물 판매/사용**: 제작품을 판매하여 `Gold` 획득 (경제 순환).
4. **공방 업그레이드**: (예정) 획득한 골드로 고양이 고용 및 화로 업그레이드.

---

## 3. 재미 축 (Fun Pillars)

### 3.1 수집/조합 (Discovery)
- **목표**: 새로운 레시피를 발견하는 탐험적 재미 제공
- **핵심 경험**: "이 조합은 뭐가 될까?" 기대감과 발견의 즐거움
- **주요 요소**:
  - 힌트 기반 레시피 발견
  - 숨겨진 레어 레시피
  - 재료 도감 수집
  - 대성공/실패 시스템

### 3.2 성장/효율 (Growth)
- **목표**: 공방이 점점 효율적으로 발전하는 경험
- **핵심 경험**: 처음엔 힘들었던 제작이 점점 쉬워지는 느낌
- **주요 요소**:
  - 제작 속도 향상
  - 대량 생산 해금
  - 자동화 시스템 (도감 등록 시 자동 제작 UI 해금)
  - 품질 등급 향상

### 3.3 표현/꾸미기 (Expression)
- **목표**: 나만의 개성 있는 공방 만들기
- **핵심 경험**: 내 취향대로 꾸민 공방에 대한 애착
- **주요 요소**:
  - 공방 인테리어 배치 (`Flame` 엔진 활용)
  - 고양이 외형 커스터마이징 (`Spine` 애니메이션)
  - 테마별 가구 세트
  - 시즌 한정 데코

---

## 4. 디자인 레버 (Design Levers)

### 4.1 레시피 발견 시스템
| 레버 | 설명 |
|------|------|
| 힌트 기반 부분 공개 | 레시피 발견을 완전 랜덤이 아닌 힌트 기반으로 설계 |
| 대성공/실패 분산 | 같은 레시피도 결과가 분산되어 반복 제작 동기 부여 |
| 구현 방향 | NPC 대화/책에서 힌트 획득, 제작 시 대성공(150%)/일반(100%)/실패(50%) 분기 |

### 4.2 배치 퍼즐
| 레버 | 설명 |
|------|------|
| 인테리어 → 생산 영향 | 공방 인테리어 배치가 생산/성공률에 영향 |
| 구현 방향 | 화로 옆 선반 → 화염 계열 성공률 +10%, 풍수 보너스 시스템 |

### 4.3 고양이 특성 시스템
| 레버 | 설명 |
|------|------|
| 성격/전문 분야 | 고양이마다 성격/전문 분야를 부여해 배치 고민 유도 |
| 구현 방향 | 불꽃이(화염 특화), 눈송이(얼음 특화), 땡이(행운 특화) 등 |

### 4.4 도감 기반 자동화
| 레버 | 설명 |
|------|------|
| 원클릭 생산 언락 | 성공 레시피는 도감에 기록되어 자동 생산 가능 |
| 구현 방향 | 3회 성공 시 도감 등록, 등록 후 자동 제작 큐 시스템 해금 |

---

## 5. 재미 측정 지표 (KPI)

| 지표 | 목표 | 측정 방법 |
|------|------|-----------|
| 레시피 발견 빈도 | 일 1~2개 | 신규 레시피 발견 로그 |
| 제작 세션 길이 | 5~10분 | 제작 시작 → 종료 시간 |
| 인테리어 변경률 | 주 2회 이상 | 배치 변경 이벤트 |
| 고양이 수집률 | 월 80% | 획득 가능 고양이 대비 보유율 |
| D7 리텐션 | 35% 이상 | 7일차 잔존율 |

---

## 6. 리스크 및 대응

| 리스크 | 영향 | 대응 방안 |
|--------|------|-----------|
| 레시피 고갈 | 탐험 재미 소멸 | 시즌별 신규 레시피, 조합 변형 |
| 실패 스트레스 | 이탈 증가 | 실패해도 부산물 획득, 힌트 강화 |
| 꾸미기 비용 부담 | 과금 피로 | 무료 획득 경로 다양화 |

---

## 7. 참고 레퍼런스

- 리틀 알케미 (조합 발견)
- 네코아츠메 (고양이 수집/배치)
- 마이리틀팜 (힐링+제작)

---

## 8. 구현 상세 (Implementation Status)

### 8.1 기술 스택 (Tech Stack)
- **Engine**: Flutter + Flame (Hybrid)
    - UI Layer: Flutter Widgets (`InventoryGrid`, `CraftingScreen`)
    - Scene Layer: Flame Game (`WorkshopGame`) for interactive decor & cats.
- **State Management**: `GetIt` (DI) + `Stream` (Reactive Inventory/Gold).
- **Core Modules**: `mg_common_game` (`InventorySystem`, `CraftingManager`, `GoldManager`).

### 8.2 초기 콘텐츠 데이터 (Prototype Data)

#### 아이템 (Items)
- **기초 재료**:
    - `herb` (약초): 기본 채집물.
    - `water` (물): 기본 채집물.
    - `fire_stone` (불의 돌): 희귀 채집물.
- **제작 결과물**:
    - `potion_health` (회복 포션): `herb` x1 + `water` x1 (3초)
    - `bomb_fire` (화염 폭탄): `fire_stone` x2 (5초)

#### 시스템 설정 (Config)
- **Idle Generation**: 5초마다 `herb` x1, `water` x1 자동 획득 (`IdleManager`).
- **Inventory**: 기본 20칸 슬롯.
